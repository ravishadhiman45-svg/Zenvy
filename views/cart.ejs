<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Zenvy Shop</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="bg-gray-50 text-gray-800">

  
  <%- include('partials/header') %>

 
  <section class="max-w-7xl mx-auto px-4 py-10 space-y-8">
    <% if (user.cart.length === 0) { %>
      <h1 class="text-2xl text-zinc-500 font-semibold">Your cart is empty</h1>
    <% } %>
    <% user.cart.map((product)=>{ %>
        <div class="flex flex-col md:flex-row md:items-start bg-[<%= product.bgColor %>] shadow-md rounded-lg overflow-hidden p-4 md:p-6 gap-6">

      <div class="flex flex-col md:flex-row md:items-center gap-4 md:w-2/3">
        <div class="w-full md:w-48 h-48 bg-[<%= product.bgColor %>] rounded overflow-hidden">
          <img src="data:image/jpeg;base64,<%= product.image.toString('base64') %>" alt="Product Image" class="w-full h-full object-cover">
        </div>

        <div class="flex-1 space-y-3">
          <h2 class="text-xl font-semibold"><%= product.name %></h2>
          <div class="flex items-center gap-3">
            <% let quantity = 1 %>
            <button class="bg-white text-black text-2xl rounded-full w-10 h-10 flex items-center justify-center border shadow">
              -
            </button>
            <p class="text-lg"><%= quantity %></p>
            <button class="bg-white text-black text-2xl rounded-full w-10 h-10 flex items-center justify-center border shadow" onclick=<% quantity+1 %>>
              +
            </button>
          </div>

          <div class="flex items-center gap-6  mt-2">
            <label class="font-medium">Net Total</label>
            <span class="font-semibold text-lg text-gray-900">₹<%=  product.price-product.discount+20 %></span>
            <button class="text-red-500 hover:text-red-700 flex items-center gap-1"><a href="/delete/<%= product._id %>"><i data-lucide="trash-2" class="text-zinc-100 w-5 h-5" type="button"></i></a></button>
          </div>
        </div>
      </div>

      <div class="flex-1 bg-[<%= product.panelColor %>] rounded-lg p-6 space-y-3 text-[<%= product.textColor %>]">
        <h3 class="text-lg font-semibold border-b pb-2">Price Breakdown</h3>
        <p>Total MRP - <span class="font-medium">₹<%= product.price %> </span></p>
        <p>Discount - <span class="font-medium text-black">₹<%= product.discount %></span></p>
        <p>Platform Fees - <span class="font-medium">₹20</span></p>
        <p>Shipping - <span class="font-medium text-black">FREE</span></p>
      </div>
    </div>
   <% }) %>

     

  </section>

  
  <footer class="border-t bg-white py-4 px-6">
    <div class="max-w-7xl mx-auto flex flex-col sm:flex-row justify-between items-center gap-3">
      <h2 class="text-xl font-semibold">Total Amount:</h2>
      <span class="text-2xl font-bold text-gray-900">₹<%= totalBill %></span>
    </div>
  </footer>
  <script>
  lucide.createIcons();
  </script>
</body>
</html>
